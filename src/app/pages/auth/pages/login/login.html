<h1 class="title">Логин</h1>

<form [formGroup]="loginForm" (keydown.enter)="submit()">
    <tui-input 
        autocomplete="email"
        type="email"
        [tuiTextfieldCleaner]="true"
        formControlName="email"
    >
        Почта
        <input tuiTextfieldLegacy />
    </tui-input>

    <tui-error 
        [error]="[] | tuiFieldError | async" 
        formControlName="email"
        class="error">
    </tui-error>

    <tui-input
        [tuiTextfieldCleaner]="true"
        [tuiTextfieldCustomContent]="eyeRef"
        formControlName="password"
        class="password"
    >
        Пароль
        <input  
            autocomplete="password"
            [type]="passwordType()"
            tuiTextfieldLegacy 
        />
    </tui-input>

    <tui-error 
        [error]="[] | tuiFieldError | async" 
        formControlName="password"
        class="error">
    </tui-error>
</form>

<a
    tuiLink
    routerLink="../recovery"
    class="recovery"
>
    Забыли пароль?
</a>

<tui-loader
    [overlay]="true"
    [showLoader]="loginForm.disabled"
    class="submit"
>
    <button
        tuiButton
        [disabled]="loginForm.invalid"
        type="button"
        (click)="submit()"
    >
        Войти
    </button>
</tui-loader>

<ng-template #eyeRef>
    <button
        tuiButton
        type="button"
	    appearance="flat"
        tuiIconButton
        [iconStart]="passwordIcon()"
        size="m"
        class="toggle"
        (click)="toggle()"
    >
        Видимость
    </button>
</ng-template>